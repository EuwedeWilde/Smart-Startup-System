(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const An=!1;var Qt=Array.isArray,Jt=Array.from,ks=Object.defineProperty,be=Object.getOwnPropertyDescriptor,$n=Object.getOwnPropertyDescriptors,Ts=Object.prototype,Cs=Array.prototype,mt=Object.getPrototypeOf;function Me(e){return typeof e=="function"}const G=()=>{};function Is(e){return typeof(e==null?void 0:e.then)=="function"}function Ds(e){return e()}function bt(e){for(var t=0;t<e.length;t++)e[t]()}const oe=2,qn=4,st=8,Et=16,J=32,ot=64,Ce=128,gt=256,j=512,ye=1024,je=2048,ne=4096,rt=8192,Fn=16384,it=32768,Ln=65536,Ps=1<<18,Bn=1<<19,ke=Symbol("$state");function Wn(e){return e===this.v}function Zt(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function en(e){return!Zt(e,this.v)}function Ms(e){throw new Error("effect_in_teardown")}function Os(){throw new Error("effect_in_unowned_derived")}function Ns(e){throw new Error("effect_orphan")}function xs(){throw new Error("effect_update_depth_exceeded")}function Rs(e){throw new Error("props_invalid_value")}function As(){throw new Error("state_descriptors_fixed")}function $s(){throw new Error("state_prototype_fixed")}function qs(){throw new Error("state_unsafe_local_read")}function Fs(){throw new Error("state_unsafe_mutation")}function W(e){return{f:0,v:e,reactions:null,equals:Wn,version:0}}function We(e,t=!1){var s;const n=W(e);return t||(n.equals=en),x!==null&&x.l!==null&&((s=x.l).s??(s.s=[])).push(n),n}function ee(e,t=!1){return Ls(We(e,t))}function Ls(e){return $!==null&&$.f&oe&&(se===null?ao([e]):se.push(e)),e}function wt(e,t){return A(e,re(()=>p(e))),t}function A(e,t){return $!==null&&ct()&&$.f&(oe|Et)&&(se===null||!se.includes(e))&&Fs(),$e(e,t)}function $e(e,t){return e.equals(t)||(e.v=t,e.version=as(),jn(e,ye),ct()&&O!==null&&O.f&j&&!(O.f&J)&&(B!==null&&B.includes(e)?(Z(O,ye),Dt(O)):we===null?co([e]):we.push(e))),t}function jn(e,t){var n=e.reactions;if(n!==null)for(var s=ct(),o=n.length,r=0;r<o;r++){var i=n[r],l=i.f;l&ye||!s&&i===O||(Z(i,t),l&(j|Ce)&&(l&oe?jn(i,je):Dt(i)))}}const tn=1,nn=2,Vn=4,Bs=8,Ws=16,js=1,Vs=2,Hn=4,Hs=8,Us=16,Gs=1,Xs=2,Ys=4,zs=2,V=Symbol();let Ks=!1;function Oe(e,t=null,n){if(typeof e!="object"||e===null||ke in e)return e;const s=mt(e);if(s!==Ts&&s!==Cs)return e;var o=new Map,r=Qt(e),i=W(0);r&&o.set("length",W(e.length));var l;return new Proxy(e,{defineProperty(u,a,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&As();var f=o.get(a);return f===void 0?(f=W(d.value),o.set(a,f)):A(f,Oe(d.value,l)),!0},deleteProperty(u,a){var d=o.get(a);if(d===void 0)a in u&&o.set(a,W(V));else{if(r&&typeof a=="string"){var f=o.get("length"),c=Number(a);Number.isInteger(c)&&c<f.v&&A(f,c)}A(d,V),fn(i)}return!0},get(u,a,d){var _;if(a===ke)return e;var f=o.get(a),c=a in u;if(f===void 0&&(!c||(_=be(u,a))!=null&&_.writable)&&(f=W(Oe(c?u[a]:V,l)),o.set(a,f)),f!==void 0){var h=p(f);return h===V?void 0:h}return Reflect.get(u,a,d)},getOwnPropertyDescriptor(u,a){var d=Reflect.getOwnPropertyDescriptor(u,a);if(d&&"value"in d){var f=o.get(a);f&&(d.value=p(f))}else if(d===void 0){var c=o.get(a),h=c==null?void 0:c.v;if(c!==void 0&&h!==V)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return d},has(u,a){var h;if(a===ke)return!0;var d=o.get(a),f=d!==void 0&&d.v!==V||Reflect.has(u,a);if(d!==void 0||O!==null&&(!f||(h=be(u,a))!=null&&h.writable)){d===void 0&&(d=W(f?Oe(u[a],l):V),o.set(a,d));var c=p(d);if(c===V)return!1}return f},set(u,a,d,f){var D;var c=o.get(a),h=a in u;if(r&&a==="length")for(var _=d;_<c.v;_+=1){var v=o.get(_+"");v!==void 0?A(v,V):_ in u&&(v=W(V),o.set(_+"",v))}c===void 0?(!h||(D=be(u,a))!=null&&D.writable)&&(c=W(void 0),A(c,Oe(d,l)),o.set(a,c)):(h=c.v!==V,A(c,Oe(d,l)));var w=Reflect.getOwnPropertyDescriptor(u,a);if(w!=null&&w.set&&w.set.call(f,d),!h){if(r&&typeof a=="string"){var b=o.get("length"),g=Number(a);Number.isInteger(g)&&g>=b.v&&A(b,g+1)}fn(i)}return!0},ownKeys(u){p(i);var a=Reflect.ownKeys(u).filter(c=>{var h=o.get(c);return h===void 0||h.v!==V});for(var[d,f]of o)f.v!==V&&!(d in u)&&a.push(d);return a},setPrototypeOf(){$s()}})}function fn(e,t=1){A(e,e.v+t)}function _n(e){return e!==null&&typeof e=="object"&&ke in e?e[ke]:e}function Qs(e,t){return Object.is(_n(e),_n(t))}var vn,Un,Gn;function Js(){if(vn===void 0){vn=window;var e=Element.prototype,t=Node.prototype;Un=be(t,"firstChild").get,Gn=be(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function sn(e=""){return document.createTextNode(e)}function kt(e){return Un.call(e)}function Tt(e){return Gn.call(e)}function M(e,t){return kt(e)}function Y(e,t){{var n=kt(e);return n instanceof Comment&&n.data===""?Tt(n):n}}function I(e,t=1,n=!1){let s=e;for(;t--;)s=Tt(s);return s}function Zs(e){e.textContent=""}function yt(e){var t=oe|ye;O===null?t|=Ce:O.f|=Bn;const n={children:null,ctx:x,deps:null,equals:Wn,f:t,fn:e,reactions:null,v:null,version:0,parent:O};if($!==null&&$.f&oe){var s=$;(s.children??(s.children=[])).push(n)}return n}function eo(e){const t=yt(e);return t.equals=en,t}function Xn(e){var t=e.children;if(t!==null){e.children=null;for(var n=0;n<t.length;n+=1){var s=t[n];s.f&oe?on(s):Se(s)}}}function Yn(e){var t,n=O;H(e.parent);try{Xn(e),t=cs(e)}finally{H(n)}return t}function zn(e){var t=Yn(e),n=(xe||e.f&Ce)&&e.deps!==null?je:j;Z(e,n),e.equals(t)||(e.v=t,e.version=as())}function on(e){Xn(e),tt(e,0),Z(e,rt),e.v=e.children=e.deps=e.ctx=e.reactions=null}function Kn(e){O===null&&$===null&&Ns(),$!==null&&$.f&Ce&&Os(),ln&&Ms()}function to(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ve(e,t,n,s=!0){var o=(e&ot)!==0,r=O,i={ctx:x,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|ye,first:null,fn:t,last:null,next:null,parent:o?null:r,prev:null,teardown:null,transitions:null,version:0};if(n){var l=qe;try{hn(!0),lt(i),i.f|=Fn}catch(d){throw Se(i),d}finally{hn(l)}}else t!==null&&Dt(i);var u=n&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&Bn)===0;if(!u&&!o&&s&&(r!==null&&to(i,r),$!==null&&$.f&oe)){var a=$;(a.children??(a.children=[])).push(i)}return i}function Qn(e){const t=Ve(st,null,!1);return Z(t,j),t.teardown=e,t}function Ft(e){Kn();var t=O!==null&&(O.f&J)!==0&&x!==null&&!x.m;if(t){var n=x;(n.e??(n.e=[])).push({fn:e,effect:O,reaction:$})}else{var s=at(e);return s}}function no(e){return Kn(),Ct(e)}function so(e){const t=Ve(ot,e,!0);return()=>{Se(t)}}function at(e){return Ve(qn,e,!1)}function ie(e,t){var n=x,s={effect:null,ran:!1};n.l.r1.push(s),s.effect=Ct(()=>{e(),!s.ran&&(s.ran=!0,A(n.l.r2,!0),re(t))})}function rn(){var e=x;Ct(()=>{if(p(e.l.r2)){for(var t of e.l.r1){var n=t.effect;n.f&j&&Z(n,je),He(n)&&lt(n),t.ran=!1}e.l.r2.v=!1}})}function Ct(e){return Ve(st,e,!0)}function ae(e){return Ie(e)}function Ie(e,t=0){return Ve(st|Et|t,e,!0)}function Q(e,t=!0){return Ve(st|J,e,!0,t)}function Jn(e){var t=e.teardown;if(t!==null){const n=ln,s=$;pn(!0),X(null);try{t.call(null)}finally{pn(n),X(s)}}}function Zn(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var n=0;n<t.length;n+=1)on(t[n])}}function es(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var s=n.next;Se(n,t),n=s}}function oo(e){for(var t=e.first;t!==null;){var n=t.next;t.f&J||Se(t),t=n}}function Se(e,t=!0){var n=!1;if((t||e.f&Ps)&&e.nodes_start!==null){for(var s=e.nodes_start,o=e.nodes_end;s!==null;){var r=s===o?null:Tt(s);s.remove(),s=r}n=!0}es(e,t&&!n),Zn(e),tt(e,0),Z(e,rt);var i=e.transitions;if(i!==null)for(const u of i)u.stop();Jn(e);var l=e.parent;l!==null&&l.first!==null&&ts(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.parent=e.fn=e.nodes_start=e.nodes_end=null}function ts(e){var t=e.parent,n=e.prev,s=e.next;n!==null&&(n.next=s),s!==null&&(s.prev=n),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=n))}function ge(e,t){var n=[];an(e,n,!0),ns(n,()=>{Se(e),t&&t()})}function ns(e,t){var n=e.length;if(n>0){var s=()=>--n||t();for(var o of e)o.out(s)}else t()}function an(e,t,n){if(!(e.f&ne)){if(e.f^=ne,e.transitions!==null)for(const i of e.transitions)(i.is_global||n)&&t.push(i);for(var s=e.first;s!==null;){var o=s.next,r=(s.f&it)!==0||(s.f&J)!==0;an(s,t,r?n:!1),s=o}}}function Te(e){ss(e,!0)}function ss(e,t){if(e.f&ne){He(e)&&lt(e),e.f^=ne;for(var n=e.first;n!==null;){var s=n.next,o=(n.f&it)!==0||(n.f&J)!==0;ss(n,o?t:!1),n=s}if(e.transitions!==null)for(const r of e.transitions)(r.is_global||t)&&r.in()}}let St=!1,Lt=[];function os(){St=!1;const e=Lt.slice();Lt=[],bt(e)}function It(e){St||(St=!0,queueMicrotask(os)),Lt.push(e)}function ro(){St&&os()}function cn(e){throw new Error("lifecycle_outside_component")}const rs=0,io=1;let pt=rs,et=!1,qe=!1,ln=!1;function hn(e){qe=e}function pn(e){ln=e}let Ee=[],Fe=0;let $=null;function X(e){$=e}let O=null;function H(e){O=e}let se=null;function ao(e){se=e}let B=null,U=0,we=null;function co(e){we=e}let is=0,xe=!1,Re=!1,Ne=new Set,x=null;function mn(e){x=e}function as(){return++is}function ct(){return x!==null&&x.l===null}function He(e){var i,l;var t=e.f;if(t&ye)return!0;if(t&je){var n=e.deps,s=(t&Ce)!==0;if(n!==null){var o;if(t&gt){for(o=0;o<n.length;o++)((i=n[o]).reactions??(i.reactions=[])).push(e);e.f^=gt}for(o=0;o<n.length;o++){var r=n[o];if(He(r)&&zn(r),s&&O!==null&&!xe&&!((l=r==null?void 0:r.reactions)!=null&&l.includes(e))&&(r.reactions??(r.reactions=[])).push(e),r.version>e.version)return!0}}s||Z(e,j)}return!1}function lo(e,t,n){throw e}function cs(e){var c;var t=B,n=U,s=we,o=$,r=xe,i=se,l=x,u=e.f;B=null,U=0,we=null,$=u&(J|ot)?null:e,xe=!qe&&(u&Ce)!==0,se=null,x=e.ctx;try{var a=(0,e.fn)(),d=e.deps;if(B!==null){var f;if(tt(e,U),d!==null&&U>0)for(d.length=U+B.length,f=0;f<B.length;f++)d[U+f]=B[f];else e.deps=d=B;if(!xe)for(f=U;f<d.length;f++)((c=d[f]).reactions??(c.reactions=[])).push(e)}else d!==null&&U<d.length&&(tt(e,U),d.length=U);return a}finally{B=t,U=n,we=s,$=o,xe=r,se=i,x=l}}function uo(e,t){let n=t.reactions;if(n!==null){var s=n.indexOf(e);if(s!==-1){var o=n.length-1;o===0?n=t.reactions=null:(n[s]=n[o],n.pop())}}n===null&&t.f&oe&&(B===null||!B.includes(t))&&(Z(t,je),t.f&(Ce|gt)||(t.f^=gt),tt(t,0))}function tt(e,t){var n=e.deps;if(n!==null)for(var s=t;s<n.length;s++)uo(e,n[s])}function lt(e){var t=e.f;if(!(t&rt)){Z(e,j);var n=O;O=e;try{t&Et?oo(e):es(e),Zn(e),Jn(e);var s=cs(e);e.teardown=typeof s=="function"?s:null,e.version=is}catch(o){lo(o)}finally{O=n}}}function ls(){Fe>1e3&&(Fe=0,xs()),Fe++}function ds(e){var t=e.length;if(t!==0){ls();var n=qe;qe=!0;try{for(var s=0;s<t;s++){var o=e[s];o.f&j||(o.f^=j);var r=[];us(o,r),fo(r)}}finally{qe=n}}}function fo(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var s=e[n];!(s.f&(rt|ne))&&He(s)&&(lt(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null?ts(s):s.fn=null))}}function _o(){if(et=!1,Fe>1001)return;const e=Ee;Ee=[],ds(e),et||(Fe=0)}function Dt(e){pt===rs&&(et||(et=!0,queueMicrotask(_o)));for(var t=e;t.parent!==null;){t=t.parent;var n=t.f;if(n&(ot|J)){if(!(n&j))return;t.f^=j}}Ee.push(t)}function us(e,t){var n=e.first,s=[];e:for(;n!==null;){var o=n.f,r=(o&J)!==0,i=r&&(o&j)!==0;if(!i&&!(o&ne))if(o&st){r?n.f^=j:He(n)&&lt(n);var l=n.first;if(l!==null){n=l;continue}}else o&qn&&s.push(n);var u=n.next;if(u===null){let f=n.parent;for(;f!==null;){if(e===f)break e;var a=f.next;if(a!==null){n=a;continue e}f=f.parent}}n=u}for(var d=0;d<s.length;d++)l=s[d],t.push(l),us(l,t)}function fs(e){var t=pt,n=Ee;try{ls();const o=[];pt=io,Ee=o,et=!1,ds(n);var s=e==null?void 0:e();return ro(),(Ee.length>0||o.length>0)&&fs(),Fe=0,s}finally{pt=t,Ee=n}}function p(e){var l;var t=e.f,n=(t&oe)!==0;if(n&&t&rt){var s=Yn(e);return on(e),s}if(Re&&Ne.add(e),$!==null){se!==null&&se.includes(e)&&qs();var o=$.deps;B===null&&o!==null&&o[U]===e?U++:B===null?B=[e]:B.push(e),we!==null&&O!==null&&O.f&j&&!(O.f&J)&&we.includes(e)&&(Z(O,ye),Dt(O))}else if(n&&e.deps===null){var r=e,i=r.parent;i!==null&&!((l=i.deriveds)!=null&&l.includes(r))&&(i.deriveds??(i.deriveds=[])).push(r)}return n&&(r=e,He(r)&&zn(r)),e.v}function vo(e){var t=Re,n=Ne;Re=!0,Ne=new Set;var s=Ne,o;try{re(e)}finally{if(Re=t,Re)for(o of Ne)n.add(o);Ne=n}for(o of s)if(o.f&Ln)for(const r of o.deps||[])r.f&oe||wt(r,null);else wt(o,null)}function re(e){const t=$;try{return $=null,e()}finally{$=t}}const ho=~(ye|je|j);function Z(e,t){e.f=e.f&ho|t}function Bt(e){return _s().get(e)}function Ot(e,t){return _s().set(e,t),t}function _s(e){return x===null&&cn(),x.c??(x.c=new Map(po(x)||void 0))}function po(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function bn(e,t=1){var n=+p(e);return A(e,n+t),n}function Ue(e,t=!1,n){x={p:x,c:null,e:null,m:!1,s:e,x:null,l:null},t||(x.l={s:null,u:null,r1:[],r2:W(!1)})}function Ge(e){const t=x;if(t!==null){const i=t.e;if(i!==null){var n=O,s=$;t.e=null;try{for(var o=0;o<i.length;o++){var r=i[o];H(r.effect),X(r.reaction),at(r.fn)}}finally{H(n),X(s)}}x=t.p,t.m=!0}return{}}function vs(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ke in e)Wt(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&ke in n&&Wt(n)}}}function Wt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{Wt(e[s],t)}catch{}const n=mt(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const s=$n(n);for(let o in s){const r=s[o].get;if(r)try{r.call(e)}catch{}}}}}const mo=new Set,gn=new Set;function bo(e,t,n,s){function o(r){if(s.capture||Qe.call(t,r),!r.cancelBubble){var i=$,l=O;X(null),H(null);try{return n.call(this,r)}finally{X(i),H(l)}}}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?It(()=>{t.addEventListener(e,o,s)}):t.addEventListener(e,o,s),o}function Ke(e,t,n,s,o){var r={capture:s,passive:o},i=bo(e,t,n,r);(t===document.body||t===window||t===document)&&Qn(()=>{t.removeEventListener(e,i,r)})}function Qe(e){var g;var t=this,n=t.ownerDocument,s=e.type,o=((g=e.composedPath)==null?void 0:g.call(e))||[],r=o[0]||e.target,i=0,l=e.__root;if(l){var u=o.indexOf(l);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var a=o.indexOf(t);if(a===-1)return;u<=a&&(i=u)}if(r=o[i]||e.target,r!==t){ks(e,"currentTarget",{configurable:!0,get(){return r||n}});var d=$,f=O;X(null),H(null);try{for(var c,h=[];r!==null;){var _=r.assignedSlot||r.parentNode||r.host||null;try{var v=r["__"+s];if(v!==void 0&&!r.disabled)if(Qt(v)){var[w,...b]=v;w.apply(r,[e,...b])}else v.call(r,e)}catch(D){c?h.push(D):c=D}if(e.cancelBubble||_===t||_===null)break;r=_}if(c){for(let D of h)queueMicrotask(()=>{throw D});throw c}}finally{e.__root=t,delete e.currentTarget,X(d),H(f)}}}function hs(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function dn(e,t){var n=O;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function R(e,t){var n=(t&zs)!==0,s,o=!e.startsWith("<!>");return()=>{s===void 0&&(s=hs(o?e:"<!>"+e),s=kt(s));var r=n?document.importNode(s,!0):s.cloneNode(!0);return dn(r,r),r}}function z(){var e=document.createDocumentFragment(),t=document.createComment(""),n=sn();return e.append(t,n),dn(t,n),e}function k(e,t){e!==null&&e.before(t)}const go=["touchstart","touchmove"];function wo(e){return go.includes(e)}let jt=!0;function Ae(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n==null?"":n+"")}function yo(e,t){return So(e,t)}const De=new Map;function So(e,{target:t,anchor:n,props:s={},events:o,context:r,intro:i=!0}){Js();var l=new Set,u=f=>{for(var c=0;c<f.length;c++){var h=f[c];if(!l.has(h)){l.add(h);var _=wo(h);t.addEventListener(h,Qe,{passive:_});var v=De.get(h);v===void 0?(document.addEventListener(h,Qe,{passive:_}),De.set(h,1)):De.set(h,v+1)}}};u(Jt(mo)),gn.add(u);var a=void 0,d=so(()=>{var f=n??t.appendChild(sn());return Q(()=>{if(r){Ue({});var c=x;c.c=r}o&&(s.$$events=o),jt=i,a=e(f,s)||{},jt=!0,r&&Ge()}),()=>{var _;for(var c of l){t.removeEventListener(c,Qe);var h=De.get(c);--h===0?(document.removeEventListener(c,Qe),De.delete(c)):De.set(c,h)}gn.delete(u),wn.delete(a),f!==n&&((_=f.parentNode)==null||_.removeChild(f))}});return wn.set(a,d),a}let wn=new WeakMap;const Nt=0,_t=1,xt=2;function Eo(e,t,n,s,o){var r=e,i=ct(),l=x,u,a,d,f,c=(i?W:We)(void 0),h=(i?W:We)(void 0),_=!1;function v(b,g){_=!0,g&&(H(w),X(w),mn(l)),b===Nt&&n&&(a?Te(a):a=Q(()=>n(r))),b===_t&&s&&(d?Te(d):d=Q(()=>s(r,c))),b===xt&&o&&(f?Te(f):f=Q(()=>o(r,h))),b!==Nt&&a&&ge(a,()=>a=null),b!==_t&&d&&ge(d,()=>d=null),b!==xt&&f&&ge(f,()=>f=null),g&&(mn(null),X(null),H(null),fs())}var w=Ie(()=>{if(u!==(u=t())){if(Is(u)){var b=u;_=!1,b.then(g=>{b===u&&($e(c,g),v(_t,!0))},g=>{if(b===u)throw $e(h,g),v(xt,!0),h.v}),It(()=>{_||v(Nt,!0)})}else $e(c,u),v(_t,!1);return()=>u=null}})}function K(e,t,n,s=null,o=!1){var r=e,i=null,l=null,u=null,a=o?it:0;Ie(()=>{u!==(u=!!t())&&(u?(i?Te(i):i=Q(()=>n(r)),l&&ge(l,()=>{l=null})):(l?Te(l):s&&(l=Q(()=>s(r))),i&&ge(i,()=>{i=null})))},a)}function ko(e,t,n){var s=e,o=V,r;Ie(()=>{Zt(o,o=t())&&(r&&ge(r),r=Q(()=>n(s)))})}let Rt=null;function Vt(e,t){return t}function To(e,t,n,s){for(var o=[],r=t.length,i=0;i<r;i++)an(t[i].e,o,!0);var l=r>0&&o.length===0&&n!==null;if(l){var u=n.parentNode;Zs(u),u.append(n),s.clear(),_e(e,t[0].prev,t[r-1].next)}ns(o,()=>{for(var a=0;a<r;a++){var d=t[a];l||(s.delete(d.k),_e(e,d.prev,d.next)),Se(d.e,!l)}})}function Ht(e,t,n,s,o,r=null){var i=e,l={flags:t,items:new Map,first:null},u=(t&Vn)!==0;if(u){var a=e;i=a.appendChild(sn())}var d=null,f=!1;Ie(()=>{var c=n(),h=Qt(c)?c:c==null?[]:Jt(c),_=h.length;if(!(f&&_===0)){f=_===0;{var v=$;Co(h,l,i,o,t,(v.f&ne)!==0,s)}r!==null&&(_===0?d?Te(d):d=Q(()=>r(i)):d!==null&&ge(d,()=>{d=null})),n()}})}function Co(e,t,n,s,o,r,i){var L,ce,ut,ft;var l=(o&Bs)!==0,u=(o&(tn|nn))!==0,a=e.length,d=t.items,f=t.first,c=f,h,_=null,v,w=[],b=[],g,D,S,E;if(l)for(E=0;E<a;E+=1)g=e[E],D=i(g,E),S=d.get(D),S!==void 0&&((L=S.a)==null||L.measure(),(v??(v=new Set)).add(S));for(E=0;E<a;E+=1){if(g=e[E],D=i(g,E),S=d.get(D),S===void 0){var q=c?c.e.nodes_start:n;_=Do(q,t,_,_===null?t.first:_.next,g,D,E,s,o),d.set(D,_),w=[],b=[],c=_.next;continue}if(u&&Io(S,g,E,o),S.e.f&ne&&(Te(S.e),l&&((ce=S.a)==null||ce.unfix(),(v??(v=new Set)).delete(S))),S!==c){if(h!==void 0&&h.has(S)){if(w.length<b.length){var N=b[0],y;_=N.prev;var m=w[0],T=w[w.length-1];for(y=0;y<w.length;y+=1)yn(w[y],N,n);for(y=0;y<b.length;y+=1)h.delete(b[y]);_e(t,m.prev,T.next),_e(t,_,m),_e(t,T,N),c=N,_=T,E-=1,w=[],b=[]}else h.delete(S),yn(S,c,n),_e(t,S.prev,S.next),_e(t,S,_===null?t.first:_.next),_e(t,_,S),_=S;continue}for(w=[],b=[];c!==null&&c.k!==D;)(r||!(c.e.f&ne))&&(h??(h=new Set)).add(c),b.push(c),c=c.next;if(c===null)continue;S=c}w.push(S),_=S,c=S.next}if(c!==null||h!==void 0){for(var C=h===void 0?[]:Jt(h);c!==null;)(r||!(c.e.f&ne))&&C.push(c),c=c.next;var P=C.length;if(P>0){var F=o&Vn&&a===0?n:null;if(l){for(E=0;E<P;E+=1)(ut=C[E].a)==null||ut.measure();for(E=0;E<P;E+=1)(ft=C[E].a)==null||ft.fix()}To(t,C,F,d)}}l&&It(()=>{var le;if(v!==void 0)for(S of v)(le=S.a)==null||le.apply()}),O.first=t.first&&t.first.e,O.last=_&&_.e}function Io(e,t,n,s){s&tn&&$e(e.v,t),s&nn?$e(e.i,n):e.i=n}function Do(e,t,n,s,o,r,i,l,u){var a=Rt;try{var d=(u&tn)!==0,f=(u&Ws)===0,c=d?f?We(o):W(o):o,h=u&nn?W(i):i,_={i:h,v:c,k:r,a:null,e:null,prev:n,next:s};return Rt=_,_.e=Q(()=>l(e,c,h),Ks),_.e.prev=n&&n.e,_.e.next=s&&s.e,n===null?t.first=_:(n.next=_,n.e.next=_.e),s!==null&&(s.prev=_,s.e.prev=_.e),_}finally{Rt=a}}function yn(e,t,n){for(var s=e.next?e.next.e.nodes_start:n,o=t?t.e.nodes_start:n,r=e.e.nodes_start;r!==s;){var i=Tt(r);o.before(r),r=i}}function _e(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function ve(e,t,n,s,o){var r=e,i="",l;Ie(()=>{i!==(i=t()??"")&&(l!==void 0&&(Se(l),l=void 0),i!==""&&(l=Q(()=>{var u=i+"",a=hs(u);dn(kt(a),a.lastChild),r.before(a)})))})}function Ut(e,t,n,s,o){var l;var r=(l=t.$$slots)==null?void 0:l[n],i=!1;r===!0&&(r=t.children,i=!0),r===void 0||r(e,i?()=>s:s)}function Po(e,t,n){var s=e,o,r;Ie(()=>{o!==(o=t())&&(r&&(ge(r),r=null),o&&(r=Q(()=>n(s,o))))},it)}let Sn=!1;function Mo(){Sn||(Sn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Oo(e,t){var n=e.__attributes??(e.__attributes={});n.value===(n.value=t)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t)}function No(e,t,n,s){var o=e.__attributes??(e.__attributes={});o[t]!==(o[t]=n)&&(n==null?e.removeAttribute(t):typeof n!="string"&&xo(e).includes(t)?e[t]=n:e.setAttribute(t,n))}var En=new Map;function xo(e){var t=En.get(e.nodeName);if(t)return t;En.set(e.nodeName,t=[]);for(var n,s=mt(e),o=Element.prototype;o!==s;){n=$n(s);for(var r in n)n[r].set&&t.push(r);s=mt(s)}return t}function Le(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}const Ro=()=>performance.now(),he={tick:e=>requestAnimationFrame(e),now:()=>Ro(),tasks:new Set};function ps(e){he.tasks.forEach(t=>{t.c(e)||(he.tasks.delete(t),t.f())}),he.tasks.size!==0&&he.tick(ps)}function Ao(e){let t;return he.tasks.size===0&&he.tick(ps),{promise:new Promise(n=>{he.tasks.add(t={c:e,f:n})}),abort(){he.tasks.delete(t)}}}function vt(e,t){e.dispatchEvent(new CustomEvent(t))}function $o(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function kn(e){const t={},n=e.split(";");for(const s of n){const[o,r]=s.split(":");if(!o||r===void 0)break;const i=$o(o.trim());t[i]=r.trim()}return t}const qo=e=>e;function Tn(e,t,n,s){var o=(e&Gs)!==0,r=(e&Xs)!==0,i=o&&r,l=(e&Ys)!==0,u=i?"both":o?"in":"out",a,d=t.inert,f,c;function h(){var g=$,D=O;X(null),H(null);try{return a??(a=n()(t,(s==null?void 0:s())??{},{direction:u}))}finally{X(g),H(D)}}var _={is_global:l,in(){var g;if(t.inert=d,!o){c==null||c.abort(),(g=c==null?void 0:c.reset)==null||g.call(c);return}r||f==null||f.abort(),vt(t,"introstart"),f=Gt(t,h(),c,1,()=>{vt(t,"introend"),f==null||f.abort(),f=a=void 0})},out(g){if(!r){g==null||g(),a=void 0;return}t.inert=!0,vt(t,"outrostart"),c=Gt(t,h(),f,0,()=>{vt(t,"outroend"),g==null||g()})},stop:()=>{f==null||f.abort(),c==null||c.abort()}},v=O;if((v.transitions??(v.transitions=[])).push(_),o&&jt){var w=l;if(!w){for(var b=v.parent;b&&b.f&it;)for(;(b=b.parent)&&!(b.f&Et););w=!b||(b.f&Fn)!==0}w&&at(()=>{re(()=>_.in())})}}function Gt(e,t,n,s,o){var r=s===1;if(Me(t)){var i,l=!1;return It(()=>{if(!l){var w=t({direction:r?"in":"out"});i=Gt(e,w,n,s,o)}}),{abort:()=>{l=!0,i==null||i.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(n==null||n.deactivate(),!(t!=null&&t.duration))return o(),{abort:G,deactivate:G,reset:G,t:()=>s};const{delay:u=0,css:a,tick:d,easing:f=qo}=t;var c=[];if(r&&n===void 0&&(d&&d(0,1),a)){var h=kn(a(0,1));c.push(h,h)}var _=()=>1-s,v=e.animate(c,{duration:u});return v.onfinish=()=>{var w=(n==null?void 0:n.t())??1-s;n==null||n.abort();var b=s-w,g=t.duration*Math.abs(b),D=[];if(g>0){if(a)for(var S=Math.ceil(g/16.666666666666668),E=0;E<=S;E+=1){var q=w+b*f(E/S),N=a(q,1-q);D.push(kn(N))}_=()=>{var y=v.currentTime;return w+b*f(y/g)},d&&Ao(()=>{if(v.playState!=="running")return!1;var y=_();return d(y,1-y),!0})}v=e.animate(D,{duration:g,fill:"forwards"}),v.onfinish=()=>{_=()=>s,d==null||d(s,1-s),o()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=G)},deactivate:()=>{o=G},reset:()=>{s===0&&(d==null||d(1,0))},t:()=>_()}}function ms(e,t,n,s=n){e.addEventListener(t,n);const o=e.__on_r;o?e.__on_r=()=>{o(),s()}:e.__on_r=s,Mo()}function ze(e,t,n=t){var s=ct();ms(e,"input",()=>{var o=Cn(e)?In(e.value):e.value;n(o),s&&o!==(o=t())&&(e.value=o??"")}),Ct(()=>{var o=t();Cn(e)&&o===In(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function Cn(e){var t=e.type;return t==="number"||t==="range"}function In(e){return e===""?null:+e}function bs(e,t,n){if(e.multiple)return Bo(e,t);for(var s of e.options){var o=Ze(s);if(Qs(o,t)){s.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Fo(e,t){at(()=>{var n=new MutationObserver(()=>{var s=e.__value;bs(e,s)});return n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function Lo(e,t,n=t){var s=!0;ms(e,"change",()=>{var o;if(e.multiple)o=[].map.call(e.querySelectorAll(":checked"),Ze);else{var r=e.querySelector(":checked");o=r&&Ze(r)}n(o)}),at(()=>{var o=t();if(bs(e,o,s),s&&o===void 0){var r=e.querySelector(":checked");r!==null&&(o=Ze(r),n(o))}e.__value=o,s=!1}),Fo(e)}function Bo(e,t){for(var n of e.options)n.selected=~t.indexOf(Ze(n))}function Ze(e){return"__value"in e?e.__value:e.value}function dt(e=!1){const t=x,n=t.l.u;if(!n)return;let s=()=>vs(t.s);if(e){let o=0,r={};const i=yt(()=>{let l=!1;const u=t.s;for(const a in u)u[a]!==r[a]&&(r[a]=u[a],l=!0);return l&&o++,o});s=()=>p(i)}n.b.length&&no(()=>{Dn(t,s),bt(n.b)}),Ft(()=>{const o=re(()=>n.m.map(Ds));return()=>{for(const r of o)typeof r=="function"&&r()}}),n.a.length&&Ft(()=>{Dn(t,s),bt(n.a)})}function Dn(e,t){if(e.l.s)for(const n of e.l.s)p(n);t()}function gs(e,t,n){if(e==null)return t(void 0),n&&n(void 0),G;const s=re(()=>e.subscribe(t,n));return s.unsubscribe?()=>s.unsubscribe():s}let ht=!1;function te(e,t,n){const s=n[t]??(n[t]={store:null,source:We(void 0),unsubscribe:G});if(s.store!==e)if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=G;else{var o=!0;s.unsubscribe=gs(e,r=>{o?s.source.v=r:A(s.source,r)}),o=!1}return p(s.source)}function Xt(e,t){return e.set(t),t}function Pt(){const e={};return Qn(()=>{for(var t in e)e[t].unsubscribe()}),e}function Wo(e){var t=ht;try{return ht=!1,[e(),ht]}finally{ht=t}}const jo={get(e,t){if(!e.exclude.includes(t))return p(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,n){return t in e.special||(e.special[t]=pe({get[t](){return e.props[t]}},t,Hn)),e.special[t](n),bn(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),bn(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Vo(e,t){return new Proxy({props:e,exclude:t,special:{},version:W(0)},jo)}const Ho={get(e,t){let n=e.props.length;for(;n--;){let s=e.props[n];if(Me(s)&&(s=s()),typeof s=="object"&&s!==null&&t in s)return s[t]}},set(e,t,n){let s=e.props.length;for(;s--;){let o=e.props[s];Me(o)&&(o=o());const r=be(o,t);if(r&&r.set)return r.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let s=e.props[n];if(Me(s)&&(s=s()),typeof s=="object"&&s!==null&&t in s){const o=be(s,t);return o&&!o.configurable&&(o.configurable=!0),o}}},has(e,t){for(let n of e.props)if(Me(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){Me(n)&&(n=n());for(const s in n)t.includes(s)||t.push(s)}return t}};function Uo(...e){return new Proxy({props:e},Ho)}function Pn(e){for(var t=O,n=O;t!==null&&!(t.f&(J|ot));)t=t.parent;try{return H(t),e()}finally{H(n)}}function pe(e,t,n,s){var q;var o=(n&js)!==0,r=(n&Vs)!==0,i=(n&Hs)!==0,l=(n&Us)!==0,u=!1,a;i?[a,u]=Wo(()=>e[t]):a=e[t];var d=(q=be(e,t))==null?void 0:q.set,f=s,c=!0,h=!1,_=()=>(h=!0,c&&(c=!1,l?f=re(s):f=s),f);a===void 0&&s!==void 0&&(d&&r&&Rs(),a=_(),d&&d(a));var v;if(r)v=()=>{var N=e[t];return N===void 0?_():(c=!0,h=!1,N)};else{var w=Pn(()=>(o?yt:eo)(()=>e[t]));w.f|=Ln,v=()=>{var N=p(w);return N!==void 0&&(f=void 0),N===void 0?f:N}}if(!(n&Hn))return v;if(d){var b=e.$$legacy;return function(N,y){return arguments.length>0?((!r||!y||b||u)&&d(y?v():N),N):v()}}var g=!1,D=!1,S=We(a),E=Pn(()=>yt(()=>{var N=v(),y=p(S);return g?(g=!1,D=!0,y):(D=!1,S.v=N)}));return o||(E.equals=en),function(N,y){if(Re&&(g=D,v(),p(S)),arguments.length>0){const m=y?p(E):r&&i?Oe(N):N;return E.equals(m)||(g=!0,A(S,m),h&&f!==void 0&&(f=m),re(()=>p(E))),N}return p(E)}}function un(e){x===null&&cn(),x.l!==null?Xo(x).m.push(e):Ft(()=>{const t=re(e);if(typeof t=="function")return t})}function Go(e){x===null&&cn(),un(()=>()=>re(e))}function Xo(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Yo="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Yo);const Mn={},Yt={},zo={},ws=/^:(.+)/,On=4,Ko=3,Qo=2,Jo=1,Zo=1,zt=e=>e.replace(/(^\/+|\/+$)/g,"").split("/"),At=e=>e.replace(/(^\/+|\/+$)/g,""),er=(e,t)=>{const n=e.default?0:zt(e.path).reduce((s,o)=>(s+=On,o===""?s+=Zo:ws.test(o)?s+=Qo:o[0]==="*"?s-=On+Jo:s+=Ko,s),0);return{route:e,score:n,index:t}},tr=e=>e.map(er).sort((t,n)=>t.score<n.score?1:t.score>n.score?-1:t.index-n.index),Nn=(e,t)=>{let n,s;const[o]=t.split("?"),r=zt(o),i=r[0]==="",l=tr(e);for(let u=0,a=l.length;u<a;u++){const d=l[u].route;let f=!1;if(d.default){s={route:d,params:{},uri:t};continue}const c=zt(d.path),h={},_=Math.max(r.length,c.length);let v=0;for(;v<_;v++){const w=c[v],b=r[v];if(w&&w[0]==="*"){const D=w==="*"?"*":w.slice(1);h[D]=r.slice(v).map(decodeURIComponent).join("/");break}if(typeof b>"u"){f=!0;break}const g=ws.exec(w);if(g&&!i){const D=decodeURIComponent(b);h[g[1]]=D}else if(w!==b){f=!0;break}}if(!f){n={route:d,params:h,uri:"/"+r.slice(0,v).join("/")};break}}return n||s||null},$t=(e,t)=>`${At(t==="/"?e:`${At(e)}/${At(t)}`)}/`,Kt=()=>typeof window<"u"&&"document"in window&&"location"in window;function xn(e,t){const n=Vo(t,["children","$$slots","$$events","$$legacy"]);Ue(t,!1);const s=Pt(),o=()=>te(f,"$activeRoute",s);let r=pe(t,"path",8,""),i=pe(t,"component",12,null),l=ee({}),u=ee({});const{registerRoute:a,unregisterRoute:d,activeRoute:f}=Bt(Yt),c={path:r(),default:r()===""};a(c),Go(()=>{d(c)}),ie(()=>(o(),vs(n),Kt),()=>{if(o()&&o().route===c){A(l,o().params);const{component:v,path:w,...b}=n;A(u,b),v&&(v.toString().startsWith("class ")?i(v):i(v())),Kt()&&!o().preserveScroll&&(window==null||window.scrollTo(0,0))}}),rn(),dt();var h=z(),_=Y(h);K(_,()=>o()&&o().route===c,v=>{var w=z(),b=Y(w);K(b,i,g=>{var D=z(),S=Y(D);Eo(S,i,null,(E,q)=>{var N=z(),y=Y(N);Po(y,()=>{var m;return((m=p(q))==null?void 0:m.default)||p(q)},(m,T)=>{T(m,Uo(()=>p(l),()=>p(u)))}),k(E,N)}),k(g,D)},g=>{var D=z(),S=Y(D);Ut(S,t,"default",{get params(){return p(l)}}),k(g,D)}),k(v,w)}),k(e,h),Ge()}const Pe=[];function nr(e,t){return{subscribe:me(e,t).subscribe}}function me(e,t=G){let n=null;const s=new Set;function o(l){if(Zt(e,l)&&(e=l,n)){const u=!Pe.length;for(const a of s)a[1](),Pe.push(a,e);if(u){for(let a=0;a<Pe.length;a+=2)Pe[a][0](Pe[a+1]);Pe.length=0}}}function r(l){o(l(e))}function i(l,u=G){const a=[l,u];return s.add(a),s.size===1&&(n=t(o,r)||G),l(e),()=>{s.delete(a),s.size===0&&n&&(n(),n=null)}}return{set:o,update:r,subscribe:i}}function sr(e,t,n){const s=!Array.isArray(e),o=s?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=t.length<2;return nr(n,(i,l)=>{let u=!1;const a=[];let d=0,f=G;const c=()=>{if(d)return;f();const _=t(s?a[0]:a,i,l);r?i(_):f=typeof _=="function"?_:G},h=o.map((_,v)=>gs(_,w=>{a[v]=w,d&=~(1<<v),u&&c()},()=>{d|=1<<v}));return u=!0,c(),function(){bt(h),f(),u=!1}})}const qt=e=>({...e.location,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}),or=e=>{const t=[];let n=qt(e);return{get location(){return n},listen(s){t.push(s);const o=()=>{n=qt(e),s({location:n,action:"POP"})};return e.addEventListener("popstate",o),()=>{e.removeEventListener("popstate",o);const r=t.indexOf(s);t.splice(r,1)}},navigate(s,{state:o,replace:r=!1,preserveScroll:i=!1,blurActiveElement:l=!0}={}){o={...o,key:Date.now()+""};try{r?e.history.replaceState(o,"",s):e.history.pushState(o,"",s)}catch{e.location[r?"replace":"assign"](s)}n=qt(e),t.forEach(u=>u({location:n,action:"PUSH",preserveScroll:i})),l&&document.activeElement.blur()}}},rr=(e="/")=>{let t=0;const n=[{pathname:e,search:""}],s=[];return{get location(){return n[t]},addEventListener(o,r){},removeEventListener(o,r){},history:{get entries(){return n},get index(){return t},get state(){return s[t]},pushState(o,r,i){const[l,u=""]=i.split("?");t++,n.push({pathname:l,search:u}),s.push(o)},replaceState(o,r,i){const[l,u=""]=i.split("?");n[t]={pathname:l,search:u},s[t]=o}}}},ir=or(Kt()?window:rr());var ar=R("<div><!></div>");function cr(e,t){Ue(t,!1);const n=Pt(),s=()=>te(g,"$base",n),o=()=>te(b,"$location",n),r=()=>te(_,"$routes",n),i=()=>te(v,"$activeRoute",n);let l=pe(t,"basepath",8,"/"),u=pe(t,"url",8,null),a=pe(t,"viewtransition",8,null),d=pe(t,"history",8,ir);const f=(m,T,C)=>{const P=a()(C);return typeof(P==null?void 0:P.fn)=="function"?P.fn(m,P):P};Ot(zo,d());const c=Bt(Mn),h=Bt(Yt),_=me([]),v=me(null);let w=!1;const b=c||me(u()?{pathname:u()}:d().location),g=h?h.routerBase:me({path:l(),uri:l()}),D=sr([g,v],([m,T])=>{if(!T)return m;const{path:C}=m,{route:P,uri:F}=T;return{path:P.default?C:P.path.replace(/\*.*$/,""),uri:F}}),S=m=>{const{path:T}=s();let{path:C}=m;if(m._path=C,m.path=$t(T,C),typeof window>"u"){if(w)return;const P=Nn([m],o().pathname);P&&(v.set(P),w=!0)}else _.update(P=>[...P,m])},E=m=>{_.update(T=>T.filter(C=>C!==m))};let q=ee(!1);c||(un(()=>d().listen(T=>{A(q,T.preserveScroll||!1),b.set(T.location)})),Ot(Mn,b)),Ot(Yt,{activeRoute:v,base:g,routerBase:D,registerRoute:S,unregisterRoute:E}),ie(()=>(s(),$t),()=>{const{path:m}=s();_.update(T=>T.map(C=>Object.assign(C,{path:$t(m,C._path)})))}),ie(()=>(r(),o(),p(q)),()=>{const m=Nn(r(),o().pathname);v.set(m&&{...m,preserveScroll:p(q)})}),rn(),dt();var N=z(),y=Y(N);K(y,a,m=>{var T=z(),C=Y(T);ko(C,()=>o().pathname,P=>{var F=ar(),L=M(F);Ut(L,t,"default",{get route(){return i()&&i().uri},get location(){return o()}}),Tn(1,F,()=>f),Tn(2,F,()=>f),k(P,F)}),k(m,T)},m=>{var T=z(),C=Y(T);Ut(C,t,"default",{get route(){return i()&&i().uri},get location(){return o()}}),k(m,T)}),k(e,N),Ge()}var lr=R('<header class="header svelte-nhk0gj"><h1 class="header__title svelte-nhk0gj">Smart Startup System</h1> <p class="header__subtitle svelte-nhk0gj">By Euwe de Wilde & Interactive Matter</p> <nav class="header__nav svelte-nhk0gj"><a class="header__nav-item svelte-nhk0gj" href="/">Config</a> <a class="header__nav-item svelte-nhk0gj" href="/schedule">Schedule</a> <a class="header__nav-item svelte-nhk0gj" href="/docs">Docs</a></nav></header>');function ys(e){var t=lr();k(e,t)}const Be=me([]),Je=me("disconnected"),nt=me(null);let fe;function Rn(){return fe}function Ss(){fe||(Be.set([]),Je.set("connecting"),console.log("Attempting to connect WebSocket..."),fe=new WebSocket("ws://localhost:3000"),fe.onopen=()=>{console.log("WebSocket connected successfully"),Je.set("connected"),fe.send(JSON.stringify({type:"getDevices"}))},fe.onmessage=e=>{console.log("Received raw message:",e.data);try{const t=JSON.parse(e.data);console.log("Parsed message data:",t),t.devices&&Array.isArray(t.devices)?(console.log("Setting devices from array:",t.devices),Be.set(t.devices),nt.update(n=>n&&(t.devices.find(o=>o.dMac===n.dMac)||n))):t.type==="deviceStatus"&&t.device&&(console.log("Updating single device:",t.device),Be.update(n=>{const s=n.findIndex(o=>o.dMac===t.device.dMac);return s>=0?(n[s]=t.device,[...n]):[...n,t.device]}))}catch(t){console.error("Error parsing WebSocket message:",t)}},fe.onerror=e=>{console.error("WebSocket error:",e),Je.set("error")},fe.onclose=()=>{console.log("WebSocket connection closed"),Je.set("disconnected"),setTimeout(Ss,5e3)})}function dr(){Ss()}var ur=R("<p> </p>"),fr=R("<p>No devices found</p>"),_r=R("<li> </li>"),vr=R('<ul class="device-list__sockets svelte-k78weu"></ul>'),hr=R("<p> </p>"),pr=R('<button class="device-list__button svelte-k78weu"> <!></button>'),mr=R('<ul class="device-list__list svelte-k78weu"></ul>'),br=R('<section class="device-list svelte-k78weu"><h2 class="device-list__title svelte-k78weu">Devices</h2> <!></section>');function gr(e,t){Ue(t,!1);const n=Pt(),s=()=>te(nt,"$selectedDevice",n),o=()=>te(Je,"$connectionStatus",n),r=()=>te(Be,"$devices",n);function i(a){Xt(nt,a)}dt();var l=br(),u=I(M(l),2);K(u,()=>o()!=="connected",a=>{var d=ur(),f=M(d);ae(()=>Ae(f,`Status: ${o()??""}`)),k(a,d)},a=>{var d=z(),f=Y(d);K(f,()=>r().length===0,c=>{var h=fr();k(c,h)},c=>{var h=mr();Ht(h,5,r,Vt,(_,v,w)=>{var b=pr(),g=M(b),D=I(g);K(D,()=>p(v).dSockets&&p(v).dSockets.length>0,S=>{var E=vr();Ht(E,5,()=>p(v).dSockets,Vt,(q,N,y)=>{var m=_r(),T=M(m);ae(()=>Ae(T,`${(w===r().length-1?"    ":"│   ")??""}
                  ${(y===p(v).dSockets.length-1?"└──":"├──")??""} 
                  ${p(N).sId??""}|${p(N).sName??""}|${(p(N).sState?"On":"Off")??""}|${(p(N).sInUse?"Active":"Inactive")??""}`)),k(q,m)}),k(S,E)},S=>{var E=hr(),q=M(E);ae(()=>Ae(q,`${(w===r().length-1?"    ":"│   ")??""}└── No sockets available`)),k(S,E)}),ae(()=>{var S;Le(b,"device-list__button-connected",p(v).dConnected),Le(b,"device-list__button-disconnected",!p(v).dConnected),Le(b,"device-list__button-selected",((S=s())==null?void 0:S.dMac)===p(v).dMac),Ae(g,`${(w===r().length-1?"└──":"├──")??""} ${p(v).dMac??""}|${p(v).dName??""}|${p(v).dId??""}|${p(v).dIp??""} `)}),Ke("click",b,()=>i(p(v))),k(_,b)}),k(c,h)},!0),k(a,d)}),k(e,l),Ge()}var wr=R('<div class="device-config__form-group svelte-138ha52"><label class="device-config__form-label svelte-138ha52" for="name">Device Name</label> <input class="device-config__form-input svelte-138ha52" type="text" id="name"> <label class="device-config__form-label svelte-138ha52" for="id">Device ID</label> <input class="device-config__form-input svelte-138ha52" type="text" id="id" disabled> <label class="device-config__form-label svelte-138ha52" for="ip">Device IP</label> <input class="device-config__form-input svelte-138ha52" type="text" id="ip"> <label class="device-config__form-label svelte-138ha52" for="group">Device Group</label> <input class="device-config__form-input svelte-138ha52" type="text" id="group"></div>'),yr=R('<option class="device-config__socket-option svelte-138ha52"> </option>'),Sr=R('<div class="device-config__socket-selected svelte-138ha52"><label class="device-config__socket-label svelte-138ha52" for="socket-name">Socket Name</label> <input class="device-config__socket-input svelte-138ha52" type="text" id="socket-name"> <label class="device-config__socket-label svelte-138ha52" for="socket-group">Socket Group</label> <input class="device-config__socket-input svelte-138ha52" type="text" id="socket-group" placeholder="Socket Group"> <label class="device-config__socket-label svelte-138ha52" for="socket-inuse">Socket State</label> <button class="device-config__socket-button svelte-138ha52" type="button"> </button></div>'),Er=R('<div class="device-config__socket svelte-138ha52"><div class="device-config__socket-select svelte-138ha52"><label class="device-config__socket-label svelte-138ha52" for="socket-select">Socket Select</label> <select class="device-config__socket-dropdown svelte-138ha52" id="socket-select"><option>Choose a socket...</option><!></select></div> <!></div>'),kr=R('<p class="device-config__message svelte-138ha52">Device is disconnected. Configuration unavailable.</p>'),Tr=R('<section class="device-config svelte-138ha52"><h2 class="device-config__title svelte-138ha52">Device Config</h2> <div class="device-config__config-field svelte-138ha52"><div class="device-config__tabs svelte-138ha52"><button class="device-config__tabs-button svelte-138ha52">Device Configuration</button> <button class="device-config__tabs-button svelte-138ha52">Socket Configuration</button></div> <form class="device-config__form svelte-138ha52"><div class="device-config__form-content svelte-138ha52"><!> <!></div> <button class="device-config__form-button svelte-138ha52" type="submit">Save Configuration</button></form></div></section>');function Cr(e,t){Ue(t,!1);const n=Pt(),s=()=>te(nt,"$selectedDevice",n),o=()=>te(Be,"$devices",n),r=ee(),i=ee(),l=ee(),u=ee(),a=ee();function d(y){if(y.preventDefault(),s()){const m=s().dSockets.map(P=>({...P,sName:P.sName||`Socket ${P.sId}`,sGroup:P.sGroup||"",sInUse:P.sInUse||!1})),T={dMac:s().dMac,dId:p(i),dName:p(r),dIp:p(l),dGroup:p(u),dSockets:m},C=Rn();C&&C.readyState===WebSocket.OPEN&&C.send(JSON.stringify({config:{device:s().dMac,config:T}}))}}function f(y){if(s()){const m=s().dSockets.find(T=>T.sId===y);if(m){const T=Rn();T&&T.readyState===WebSocket.OPEN&&(m.sState=!m.sState,Xt(Be,o().map(C=>C.dMac===s().dMac?{...C,dSockets:C.dSockets.map(P=>P.sId===y?{...P,sState:m.sState}:P)}:C)),Xt(nt,o().find(C=>C.dMac===s().dMac)),T.send(JSON.stringify({control:{device:s().dMac,control:[{sId:y,sState:m.sState}]}})))}}}let c=ee("device"),h=ee("");ie(()=>s(),()=>{var y,m;A(r,(y=s())!=null&&y.dConnected&&((m=s())==null?void 0:m.dName)||"")}),ie(()=>s(),()=>{var y,m;A(i,(y=s())!=null&&y.dConnected&&((m=s())==null?void 0:m.dId)||"")}),ie(()=>s(),()=>{var y,m;A(l,(y=s())!=null&&y.dConnected&&((m=s())==null?void 0:m.dIp)||"")}),ie(()=>s(),()=>{var y,m;A(u,(y=s())!=null&&y.dConnected&&((m=s())==null?void 0:m.dGroup)||"")}),ie(()=>s(),()=>{s()&&!s().dConnected&&(A(r,""),A(i,""),A(l,""),A(u,""))}),ie(()=>(s(),p(h)),()=>{var y,m;A(a,(m=(y=s())==null?void 0:y.dSockets)==null?void 0:m.find(T=>T.sId===p(h)))}),rn(),dt();var _=Tr(),v=I(M(_),2),w=M(v),b=M(w),g=I(b,2),D=I(w,2),S=M(D),E=M(S);K(E,()=>p(c)==="device",y=>{var m=wr(),T=I(M(m),2),C=I(T,4),P=I(C,4),F=I(P,4);ae(()=>{T.disabled=!s()||!s().dConnected,Oo(C,p(i)),P.disabled=!s()||!s().dConnected,F.disabled=!s()||!s().dConnected}),ze(T,()=>p(r),L=>A(r,L)),ze(P,()=>p(l),L=>A(l,L)),ze(F,()=>p(u),L=>A(u,L)),k(y,m)});var q=I(E,2);K(q,()=>p(c)==="socket",y=>{var m=z(),T=Y(m);K(T,()=>{var C;return((C=s())==null?void 0:C.dSockets)&&s().dConnected},C=>{var P=Er(),F=M(P),L=I(M(F),2);ae(()=>{p(h),vo(()=>{s()})});var ce=M(L);ce.value=((ce.__value="")==null,"");var ut=I(ce);Ht(ut,1,()=>s().dSockets,Vt,(le,de)=>{var ue=yr(),Xe={},Ye=M(ue);ae(()=>{Xe!==(Xe=p(de).sId)&&(ue.value=(ue.__value=p(de).sId)==null?"":p(de).sId),Ae(Ye,p(de).sName||`Socket ${p(de).sId}`)}),k(le,ue)});var ft=I(F,2);K(ft,()=>p(a),le=>{var de=Sr(),ue=I(M(de),2),Xe=I(ue,4),Ye=I(Xe,4),Es=M(Ye);ae(()=>{No(ue,"placeholder",`Socket ${p(a).sId}`),Le(Ye,"device-config__socket-button--active",p(a).sState),Ae(Es,p(a).sState?"Turn Off":"Turn On")}),ze(ue,()=>p(a).sName,Mt=>wt(a,p(a).sName=Mt)),ze(Xe,()=>p(a).sGroup,Mt=>wt(a,p(a).sGroup=Mt)),Ke("click",Ye,()=>f(p(a).sId)),k(le,de)}),Lo(L,()=>p(h),le=>A(h,le)),k(C,P)},C=>{var P=z(),F=Y(P);K(F,()=>s()&&!s().dConnected,L=>{var ce=kr();k(L,ce)},null,!0),k(C,P)}),k(y,m)});var N=I(S,2);ae(()=>{Le(b,"device-config__tabs-button-active",p(c)==="device"),Le(g,"device-config__tabs-button-active",p(c)==="socket"),N.disabled=!s()||!s().dConnected}),Ke("click",b,()=>A(c,"device")),Ke("click",g,()=>A(c,"socket")),Ke("submit",D,d),k(e,_),Ge()}var Ir=R("<main><!> <!> <!></main>");function Dr(e,t){Ue(t,!1),un(()=>{dr()}),dt();var n=Ir(),s=M(n);ys(s);var o=I(s,2);gr(o,{});var r=I(o,2);Cr(r,{}),k(e,n),Ge()}var Pr=R('<section><h3 class="docs__subtitle">Introduction</h3> <p class="docs__content">If you are seeing this, great! That means that you managed to get the frontend up and running. This is the documentation of the Smart Startup System or S3 (pronounced <em>"S-cubed"</em>) for short. This is an opensource socket switching system, the problem with most smart switching systems on the market is that they do not have an ethernet port and are not very configurable. This system changes that and is an upgrade in all regards (I am a bit biased). This documentation hopes to shed light on the making of the devices and how they work.</p></section>');function Mr(e){var t=Pr();k(e,t)}var Or=R('<section><h3 class="docs__subtitle">Contents</h3> <ul class="docs__content-list"><li><a href="#hardware" class="docs__link">Hardware</a></li> <ul class="docs__content-list"><li><a href="#components" class="docs__link">Components</a></li> <li><a href="#manufacturing" class="docs__link">Manufacturing</a></li> <ul class="docs__content-list"><li><a href="#cnc" class="docs__link">CNC</a></li> <li><a href="#drilling" class="docs__link">Drilling</a></li></ul> <li><a href="#electronics" class="docs__link">Electronics</a></li> <ul class="docs__content-list"><li><a href="#schematic" class="docs__link">Schematic</a></li> <li><a href="#pcb" class="docs__link">PCB</a></li> <li><a href="#soldering" class="docs__link">Soldering</a></li></ul></ul> <li><a href="#software" class="docs__link">Software</a></li> <ul class="docs__content-list"><li><a href="#architecture" class="docs__link">Architecture</a></li> <li><a href="#server" class="docs__link">Server</a></li> <li><a href="#device" class="docs__link">Device</a></li> <ul class="docs__content-list"><li><a href="#eeprom" class="docs__link">EEPROM</a></li> <li><a href="#mqtt" class="docs__link">MQTT</a></li> <li><a href="#connectivity" class="docs__link">Connectivity</a></li></ul> <li><a href="#frontend" class="docs__link">Frontend</a></li> <ul class="docs__content-list"><li><a href="#config" class="docs__link">Config</a></li> <li><a href="#schedule" class="docs__link">Schedule</a></li> <li><a href="#docs" class="docs__link">Docs</a></li></ul> <li><a href="#database" class="docs__link">Database</a></li></ul> <li><a href="#closing" class="docs__link">Closing</a></li> <ul class="docs__content-list"><li><a href="#thanks" class="docs__link">Thanks</a></li> <li><a href="#contact" class="docs__link">Contact</a></li></ul></ul></section>');function Nr(e){var t=Or();k(e,t)}var xr=R('<section><h2 class="docs__title">Docs</h2> <p class="docs__content-footnote">Documentation is still under construction. Version 0.3.0. 2024-11-12. By <a href="https://github.com/EuwedeWilde" class="docs__link">Euwe de Wilde</a></p> <!> <!></section>');function Rr(e){var t=xr(),n=I(M(t),4);Mr(n);var s=I(n,2);Nr(s),k(e,t)}var Ar=R('<section><h3 class="docs__subtitle" id="components">Components</h3> <p class="docs__content">This a list with all components that you need to make the device.</p> <table class="docs__table"><thead class="docs__table-head"><tr class="docs__table-row"><th class="docs__table-item--component">Component</th><th class="docs__table-item--quantity">Quantity</th><th class="docs__table-item--notes">Notes</th></tr></thead><tbody class="docs__table-body"><tr class="docs__table-row"><td class="docs__table-item--component">Smart Startup System PCB</td><td class="docs__table-item--quantity">1</td><td class="docs__table-item--notes">Look at the <a href="#pcb" class="docs__link">PCB</a> section for more information</td></tr><tr class="docs__table-row"><td class="docs__table-item--component"><a href="https://nl.aliexpress.com/item/1005005728138924.html" class="docs__link">Enclosure with ears (160x90x60mm)</a></td><td class="docs__table-item--quantity">1</td><td class="docs__table-item--notes">For mounting the device</td></tr><tr class="docs__table-row"><td class="docs__table-item--component">Relays SRD-05VDC-SL-A or SRD-05VDC-SL-C</td><td class="docs__table-item--quantity">4</td><td class="docs__table-item--notes">Make sure to get the 5V version</td></tr><tr class="docs__table-row"><td class="docs__table-item--component">Hi-Link HLK-PM01</td><td class="docs__table-item--quantity">1</td><td class="docs__table-item--notes">Make sure to get the 5V version</td></tr><tr class="docs__table-row"><td class="docs__table-item--component"><a href="https://www.tinytronics.nl/en/communication-and-signals/ethernet/modules/w5500-ethernet-module-wiz850io-compatible" class="docs__link">Ethernet Module W5500</a></td><td class="docs__table-item--quantity">1</td><td class="docs__table-item--notes">Cheaper on AliExpress</td></tr><tr class="docs__table-row"><td class="docs__table-item--component"><a href="https://www.tinytronics.nl/en/communication-and-signals/wireless/wi-fi/modules/esp32-wroom-32e-wi-fi-and-bluetooth-module" class="docs__link">ESP32-WROOM-32E</a></td><td class="docs__table-item--quantity">1</td><td class="docs__table-item--notes">Interactive Matter has many of these</td></tr><tr class="docs__table-row"><td class="docs__table-item--component">2 pin screw terminal 2.54mm distance</td><td class="docs__table-item--quantity">3</td><td class="docs__table-item--notes">For connecting AC</td></tr><tr class="docs__table-row"><td class="docs__table-item--component">C14 female panel mount connector</td><td class="docs__table-item--quantity">1</td><td class="docs__table-item--notes">For AC input</td></tr><tr class="docs__table-row"><td class="docs__table-item--component">Metallic LED button 16 mm</td><td class="docs__table-item--quantity">2</td><td class="docs__table-item--notes">Non latching</td></tr><tr class="docs__table-row"><td class="docs__table-item--component"><a href="https://nl.aliexpress.com/item/1005001843775866.html" class="docs__link">Ethernet angle extender</a></td><td class="docs__table-item--quantity">1</td><td class="docs__table-item--notes">Get the 15 cm version</td></tr><tr class="docs__table-row"><td class="docs__table-item--component"><a href="https://nl.aliexpress.com/item/1005002641023788.html" class="docs__link">AC Power outlet</a></td><td class="docs__table-item--quantity">2</td><td class="docs__table-item--notes">For connecting AC devices</td></tr><tr class="docs__table-row"><td class="docs__table-item--component">KF2510 4 pin male header</td><td class="docs__table-item--quantity">2</td><td class="docs__table-item--notes">Get the white version, better than the ivory color :)</td></tr><tr class="docs__table-row"><td class="docs__table-item--component">6 pin header 2.54mm distance</td><td class="docs__table-item--quantity">1</td><td class="docs__table-item--notes">For programming the ESP32</td></tr><tr class="docs__table-row"><td class="docs__table-item--component">1k Ω SMD Resistor</td><td class="docs__table-item--quantity">3</td><td class="docs__table-item--notes"></td></tr><tr class="docs__table-row"><td class="docs__table-item--component">10k Ω SMD Resistor</td><td class="docs__table-item--quantity">2</td><td class="docs__table-item--notes"></td></tr><tr class="docs__table-row"><td class="docs__table-item--component">100k Ω SMD Resistor</td><td class="docs__table-item--quantity">4</td><td class="docs__table-item--notes"></td></tr><tr class="docs__table-row"><td class="docs__table-item--component">2.2k Ω SMD Resistor</td><td class="docs__table-item--quantity">2</td><td class="docs__table-item--notes"></td></tr><tr class="docs__table-row"><td class="docs__table-item--component">AMS1117 3.3V Voltage Regulator</td><td class="docs__table-item--quantity">1</td><td class="docs__table-item--notes">Make sure to get the 3.3V version</td></tr><tr class="docs__table-row"><td class="docs__table-item--component">SMD 2 pin button</td><td class="docs__table-item--quantity">1</td><td class="docs__table-item--notes"></td></tr><tr class="docs__table-row"><td class="docs__table-item--component">N-channel SMD Mosfet BSS138</td><td class="docs__table-item--quantity">2</td><td class="docs__table-item--notes"></td></tr><tr class="docs__table-row"><td class="docs__table-item--component">SMD LED</td><td class="docs__table-item--quantity">1</td><td class="docs__table-item--notes">Whatever color you prefer (Red)</td></tr><tr class="docs__table-row"><td class="docs__table-item--component">SM2000 Diode SMD</td><td class="docs__table-item--quantity">5</td><td class="docs__table-item--notes"></td></tr><tr class="docs__table-row"><td class="docs__table-item--component">1 µF Capacitor SMD</td><td class="docs__table-item--quantity">2</td><td class="docs__table-item--notes"></td></tr><tr class="docs__table-row"><td class="docs__table-item--component">10 µF Capacitor SMD</td><td class="docs__table-item--quantity">2</td><td class="docs__table-item--notes"></td></tr><tr class="docs__table-row"><td class="docs__table-item--component">0.1 µF Capacitor SMD</td><td class="docs__table-item--quantity">3</td><td class="docs__table-item--notes"></td></tr><tr class="docs__table-row"><td class="docs__table-item--component">AC wires</td><td class="docs__table-item--quantity">6</td><td class="docs__table-item--notes">Get Multicore, color coded, otherwise Teun gets mad</td></tr><tr class="docs__table-row"><td class="docs__table-item--component">KF2510 4 pin female connector wires</td><td class="docs__table-item--quantity">2</td><td class="docs__table-item--notes">For the buttons connection</td></tr></tbody></table></section>');function $r(e){var t=Ar();k(e,t)}var qr=R('<section><h3 class="docs__subtitle" id="electronics">Electronics</h3> <h4 class="docs__subsubtitle" id="schematic">Schematic</h4> <p class="docs__content">The schematic is pretty straight forward, and I copied most things from previous Interactive Matter projects, but some things are good to know. For example, to programming the ESP32, I used the standard IMProgrammer™. That is why the pin order is maybe a bit weird. It goes like: <em>GND - FLS - 5V - RX - TX - RST</em>. Also a diode is added in front of the 5V pin, this way the device can be powered by mains voltage, only the programmer* and/or both at the same time.</p> <p class="docs__content-footnote">* Not recommended since the 5V pin can not deliver enough power on its own.</p> <img src="/src/assets/pcb__programmer.jpg" alt="PCB Programmer" class="docs__image"> <p class="docs__image-caption">IMProgrammer™</p> <p class="docs__content">The LEDs of the LED-buttons are also directly linked to the 5V channel of the relay coils. This makes sure that the LEDs of the buttons only shine if the relays are actually on. In the schematic you see an extra LED component drawn in the schematic, this is not placed on the actual PCB, just for reference.</p> <img src="/src/assets/schematic__relays.png" alt="schematic relays" class="docs__image"> <p class="docs__image-caption">Schematic of relays and LED</p> <h4 class="docs__subsubtitle" id="pcb">PCB</h4> <div class="docs__warning"><p class="docs__warning-title">Warning</p> <p class="docs__warning-content">In PCB V2.0, a trace was forgotten to be routed making one of the buttons not work, this is fixed in version 2.1. The solution is to jump the gap with a wire. No PCB is complete without a mistake of course :)</p> <img src="/src/assets/pcb__mistake-trace.png" alt="PCB" class="docs__warning-image"> <img src="/src/assets/pcb__mistake-fix.jpeg" alt="PCB" class="docs__warning-image"> <p class="docs__warning-image-caption">PCB missing trace and fix</p></div> <p class="docs__content">It took many revisions to get the PCB to the current state. For testing, a PCB was CNCed from single sided coper PCBs. This was  a good MVP, but also a big safety hazard. The traces where mains voltage was connected to where exposed, and could easily electrocute you. Also the traces where quite thin, so they could not handle much current, it was a proof of concept after all.</p> <img src="/src/assets/pcb__v1-3D.jpeg" alt="PCB V1 3D View" class="docs__image"> <img src="/src/assets/pcb__v1-top.jpg" alt="PCB V1 Top View" class="docs__image"> <p class="docs__image-caption">PCB V1 (non copper side)</p> <p class="docs__content">It was also my first time using the KiCad Software, so I had some oversights in the first version. However, by adding some extra wiring I made it work as supposed to. After programming some basic functionality and testing the induvial components, it was time to make the second version of the PCB.</p> <p class="docs__content">For V2.0 many things need to be taken into account, like the fitting and the casing. That was the main factor determining the positioning of the components of the PCB. To test this fit, a 3D model of the casing was made, to visualize fitting. After moving everything around a bit, I made it work! Some things may look a bit strange, but they probably have reason of being placed that way. Here is a list with frequently asked questions:</p> <p class="docs__content">Here is a list with frequently asked questions:</p> <ul class="docs__content-list"><li><strong>Why the weird shape of the PCB?</strong> <p>This shape made sure it would fit nicely in the casing, with some tolerance to still move it around. This makes it easier to remove.</p></li> <li><strong>Why the cut-outs on the small sides?</strong> <p>It is true that the PCB would also fit, without the cut-outs. However, that would make it harder to remove. You first have to remove the ethernet and C14 panel mount connectors. This is not needed with the PCB cut-outs.</p></li> <li><strong>Why is the WizW5500 not the Ethernet input port, but instead is a extender used?</strong> <p>This is done to release strain from pulling an Ethernet cable in and out from the PCB. It has the added benefit of making it water sealed (to some degree).</p></li> <li><strong>Why is the W5500 Ethernet module rotated 180°?</strong> <p>For better fitting of the ethernet extender cable.</p></li></ul></section>');function Fr(e){var t=qr();k(e,t)}var Lr=R('<section><h2 class="docs__title" id="hardware">Hardware</h2> <!> <!></section>');function Br(e){var t=Lr(),n=I(M(t),2);$r(n);var s=I(n,2);Fr(s),k(e,t)}var Wr=R('<section><h3 class="docs__subtitle" id="architecture">Architecture</h3> <p class="docs__content">All communication between different systems (e.g. the device, database, frontend) all go via the server. You can see the server as the manager, telling everyone what to do and making sure all communication goes seamlessly. This is done with different commutation protocols, depending on the different systems.</p> <img src="src/assets/Architecture.png" alt="Architecture" class="docs__image"> <p class="docs__image-caption">System Architecture of S3</p> <p class="docs__content">The system architecture consists out of four systems:</p> <ol class="docs__content-list"><li><a href="#server" class="docs__link">Server</a></li> <li><a href="#device" class="docs__link">Device</a></li> <li><a href="#frontend" class="docs__link">Frontend</a></li> <li><a href="#database" class="docs__link">Database</a></li></ol> <p class="docs__content">We will now go through each system in detail.</p></section>');function jr(e){var t=Wr();k(e,t)}var Vr=R('<section><h3 class="docs__subtitle" id="server">Server</h3> <p class="docs__content">To test the server go to the backend folder and run the following command:</p> <code class="docs__content-code"><!></code> <p class="docs__content-footnote">Structure and commands</p> <p class="docs__content">As mentioned earlier, the server is the manager of all systems, making sure all goes well. I communicates with the connected devices, updates the database when changes are made and makes sure the frontend reacts to changes.</p> <p class="docs__content">All connections are important, but the one with the device is the most vital. This is done via the MQTT communication protocol, where devices can publish (pub) and subscribe (sub) to topics. All devices in on that MQTT network listing in this case to the topic called "S3", but you can name it what ever you want, just change it for all devices. The server pubs on this topic every 5 seconds  a ping, to see which devices are still online, if a device reacts with a pong, the server knows it is online, but if it does not receive anything (so no pong is send) the server knows that device is offline.</p> <code class="docs__content-code"><!></code> <p class="docs__content-footnote">Example of a ping and pong</p> <p class="docs__content">The server sends this info to the frontend, but before that it compares the info received from the device to the info that is stored in the database, depending on the type of data, it updates the info on the database or device. For example, when the device sends it info (e.g. name, id, ip), the database is then set to those values that are also on the device. But the state of the sockets for example is determined by the database and then send to the device when it comes online. This makes sure both devices are synced correctly. Then the frontend is updated accordingly, which is done via a WebSocket connection.</p> <p class="docs__content">The server has not much going on. It just sends this info in one form or the other to one of the other systems in the architecture. Not all systems need the same info, the device does not care about the socket name for example. This are all the possible variables it can send:</p> <code class="docs__content-code"><!></code> <p class="docs__content-footnote">Possible variables, with dSockets[] being an object</p></section>');function Hr(e){var t=Vr(),n=I(M(t),4),s=M(n);ve(s,()=>`// --- Structure ---
Smart-Startup-System
└──server
   ├──frontend
   ├──dist
   └──backend
       └──... // all server files

// --- Commands ---
npm run dev // to test the frontend
npm run start // to build the frontend`);var o=I(n,8),r=M(o);ve(r,()=>`S3 {"sender":"server","meth":"get","ping":"ping"}
S3/E05A1B2307DC {"sender":"E05A1B2307DC","meth":"inf","ping":"pong"}`);var i=I(o,8),l=M(i);ve(l,()=>`timestamp: date
dMac: String
dId: Number
dName: String
dIp: String
dGroup: String
dNumSockets: Number
dSockets: [{
  sId: Number
  sName: String
  sState: Boolean
  sGroup: String
  sInUse: Boolean
  sLastInUse: Date
  sLastUpdate: Date
}]
dConnected: Boolean
dLastConnection: Date
dLastUpdate: Date`),k(e,t)}var Ur=R('<section><h3 class="docs__subtitle" id="device">Device</h3> <p class="docs__content">Previously I explained how to make the devices, but to make them functional, you need to add some software. The device makes use off quite some libraries, here a quick overview:</p> <ul class="docs__content-list"><li><em>config.h</em> - library for the configuration of the device</li> <li><em>EEPROM.h</em> - library for reading and writing to the EEPROM of the device</li> <li><em>ETH.h</em> - library for adding Ethernet capabilites with the WIZ W5500 Ethernet module</li> <li><em>WiFi.h</em> - library for adding  WiFi capabilities to the ESP32</li> <li><em>ArduinoMqttClient.h</em> * -  library for communicating with the MQTT protocol</li> <li><em>ArduinoJson.h</em> ** - library for using JSON with on a arduino</li> <li><em>ESPmDNS.h</em> - library for adding DNS capabilities to the ESP32</li> <li><em>WiFiUdp.h</em> - library for adding UDP capabilities to the ESP32</li> <li><em>ArduinoOTA.h</em> - library for adding OTA capabilities to the ESP32</li></ul> <p class="docs__content-footnote">* Modified for this project, download from github <br> ** Used arduinoJson 5.x</p> <h4 class="docs__subsubtitle" id="eeprom">EEPROM</h4> <p class="docs__content">EEPROM control the storage of memory, even when the device is powered down. The following things are currently stored there:</p> <ul class="docs__content-list"><li>Device Mac Address</li> <li>Device ID</li> <li>Device IP Adress</li> <li>Device Name</li> <li>Device Number of Sockets</li> <li>WiFi SSID</li> <li>WiFi Password</li> <li>MQTT Server Address</li> <li>MQTT Server Port</li> <li>MQTT Topic</li></ul> <p class="docs__content">You want to to store things in the EEPROM that you want to change without the need of reflashing the whole device. The WiFi network is a good example, because sometimes it could be that you want to set up your system somewhere else, with some code you can easily change the network without reflashing the ESP32. the Mac is the only exception, since that address never changes, but it is device unique. The EEPROM just seemed to be a nice place to save it.</p> <p class="docs__content">At the beginning of the sketch the EEPROM is setup with:</p> <code class="docs__content-code"><!></code> <p class="docs__content-footnote">Setup function of EEPROM</p> <p class="docs__content">The EEPROM is initialized. When nothing is in the EEPROM, it writes some arbitrary values from the config struct stored int the flash memory to the EEPROM. Once that is initialized, you can read and write to the EEPROM with the following functions:</p> <code class="docs__content-code"><!></code> <p class="docs__content-footnote">Read and write functions of EEPROM</p> <h4 class="docs__subsubtitle" id="mqtt">MQTT</h4> <p class="docs__content">The MQTT protocol is used to communicate with the server. All devices are subbed to the "S3" topic and pub on the "S3/XXXXXXXXXXXX" with XXXXXXXXXXXX being replaced by the mac address of the device that pubs. When the device is powered on and initialized, it will always first pubs its info. This is to let the database sync up with the device info. After that it will send pong after each ping message.</p> <p class="docs__content">The device it self also has a button for every socket, this is to manually turn on and off the sockets. Every time one of these is pressed the socket state switches and also a MQTT request is send to update frontend and database.</p> <code class="docs__content-code"><!></code> <p class="docs__content-footnote">Example of a device info, pong and control</p> <p class="docs__content">The device sometimes also just listens to the commands of the server and updates its info accordingly when asked. This is when config or control is changed in the frontend. It does not pub a message on those two occurrences.</p> <h4 class="docs__subsubtitle" id="connectivity">Connectivity</h4> <p class="docs__content">As mentioned earlier, the device offers two methods of connecting to it, using WiFi or using Ethernet. As of version 1.0.0, this needs to be configured in the flash, however in future iterations I hope to implement a auto detect, when Ethernet is available, it will automatically switch to ethernet. This configuring of the network type is currently done by flipping a bit, 1 is for WiFi and 0 for Ethernet. This is done in the config.h file.</p> <code class="docs__content-code"><!></code> <p class="docs__content-footnote">Network type configuration</p> <p class="docs__content">This method of configuring on flash is also not ideal for setting up the WiFi network, because currently its credentials are also set there, but I can imagine that when you move the device to a different network, this is not ideal. Maybe a configuration via Bluetooth, Serial or direct ethernet connection (PC to device) could be a nice upgrade.</p></section>');function Gr(e){var t=Ur(),n=I(M(t),18),s=M(n);ve(s,()=>`void setupEEPROM() {
  EEPROM.begin(EEPROM_SIZE);
  if (!readEEPROM()) {
    dbf("No Config Defined\\n");
    defineConfig(); // Values are assigned to the config
    writeEEPROM();
  } 
}`);var o=I(n,6),r=M(o);ve(r,()=>`void writeEEPROM() {
  dbf("Writing to EEPROM...\\n");
  EEPROM.put(EEPROM_CONFIG, _cfg);
  EEPROM.write(EEPROM_CFG_DEFINED, IS_DEFINED);
  EEPROM.commit();
  dbf("Written to EEPROM!\\n");
}

bool readEEPROM() {
  if (EEPROM.read(EEPROM_CFG_DEFINED) == IS_DEFINED) {
    dbf("Loaded CONFIG from EEPROM\\n");
    EEPROM.get(EEPROM_CONFIG, _cfg);
    return true;
  } else {
    dbf("Config EEPROM Empty\\n");
    getMac(); // Get the mac address of the device
    return false;
  }
}`);var i=I(o,10),l=M(i);ve(l,()=>`S3/E05A1B2307DC {"sender":"E05A1B2307DC","meth":"inf","info":{"dId":1,"dName":"device","dIp":"192.0.0.200","dNumSockets":2}}
S3/E05A1B2307DC {"sender":"E05A1B2307DC","meth":"inf","ping":"pong"}
S3/E05A1B2307DC {"sender":"E05A1B2307DC","meth":"put","control":[{"sId":1,"sState":true},{"sId":2,"sState":true}]}`);var u=I(i,10),a=M(u);ve(a,()=>`// --- CONNECTIVITY ---
#define ETH_OR_WIFI 1 // 0 is ETH, 1 is WIFI`),k(e,t)}var Xr=R('<section><h4 class="docs__subtitle" id="frontend">Frontend</h4> <p class="docs__content">To test the frontend go to the frontend folder and run the following command:</p> <code class="docs__content-code"><!></code></section>');function Yr(e){var t=Xr(),n=I(M(t),4),s=M(n);ve(s,()=>`// --- Structure ---
Smart-Startup-System
└──server
   ├──backend
   ├──dist
   └──frontend
       └──... // all frontend files

// --- Commands ---
npm run dev // to test the server
npm run build // to start the server`),k(e,t)}var zr=R('<section><h2 class="docs__title" id="software">Software</h2> <!> <!> <!> <!></section>');function Kr(e){var t=zr(),n=I(M(t),2);jr(n);var s=I(n,2);Hr(s);var o=I(s,2);Gr(o);var r=I(o,2);Yr(r),k(e,t)}var Qr=R('<section><h3 class="docs__subtitle" id="thanks">Thanks</h3> <p class="docs__content">I want to thank Serge and Teun from Interactive Matter for their incredible support during this project. I learned a lot from them, from making to programming and development to manufacturing. Thanks a lot! :)</p></section>');function Jr(e){var t=Qr();k(e,t)}var Zr=R('<section><h3 class="docs__subtitle" id="contact">Contact</h3> <p class="docs__content">If you have any questions or want to know more about this project, feel free to contact me. You can reach me by email at <a href="mailto:info@euwedewil.de" class="docs__link">info@euwedewil.de</a>.     If you find a bug or an error, please file an issue on <a href="https://github.com/EuwedeWilde/Smart-Startup-System" class="docs__link">github</a>.</p></section>');function ei(e){var t=Zr();k(e,t)}var ti=R('<section><h2 class="docs__title" id="closing">Closing</h2> <!> <!></section>');function ni(e){var t=ti(),n=I(M(t),2);Jr(n);var s=I(n,2);ei(s),k(e,t)}var si=R('<main><!> <main class="docs"><!> <!> <!> <!></main></main>');function oi(e){var t=si(),n=M(t);ys(n);var s=I(n,2),o=M(s);Rr(o);var r=I(o,2);Br(r);var i=I(r,2);Kr(i);var l=I(i,2);ni(l),k(e,t)}var ri=R("<div><!> <!></div>");function ii(e,t){let n=pe(t,"url",8,"");cr(e,{get url(){return n()},children:(s,o)=>{var r=ri(),i=M(r);xn(i,{path:"/",component:Dr});var l=I(i,2);xn(l,{path:"/docs",component:oi}),k(s,r)},$$slots:{default:!0}})}yo(ii,{target:document.getElementById("app")});
